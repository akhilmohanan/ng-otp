{"version":3,"file":"ng-otp.umd.js.map","sources":["ng://ng-otp/lib/ng-otp.service.ts","ng://ng-otp/lib/ng-otp.component.ts","ng://ng-otp/lib/ng-otp.module.ts"],"sourcesContent":["import { Injectable, ElementRef } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgOtpService {\n\n  constructor() { }\n\n  isEmptySting(string: string) {\n    return string === '';\n  }\n\n  isLastInput(index, limit) {\n    return index === limit;\n  }\n\n  getElement(index) {\n    return document.querySelector<HTMLInputElement>(`#otp-${index}`);\n  }\n}\n","import { Component, Input, OnDestroy, Output, EventEmitter } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators, FormControl } from '@angular/forms';\nimport { NgOtpService } from './ng-otp.service';\nimport { Subject, Subscription } from 'rxjs';\nimport { throttleTime } from 'rxjs/operators';\n\n@Component({\n  selector: 'ng-otp',\n  templateUrl: './ng-otp.component.html',\n  styleUrls: ['./ng-otp.component.scss']\n})\nexport class NgOtpComponent implements OnDestroy {\n\n  @Input() limit = 4;\n  @Output() otpOut = new EventEmitter();\n\n  otpForm: FormGroup;\n  limitArray = [];\n  changeFocus$ = new Subject();\n  subscription = new Subscription();\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private ngOtpService: NgOtpService\n  ) {\n    this.setFormBuilder();\n    this.subscription.add(this.changeFocus$\n      .pipe(\n        throttleTime(100)\n      ).subscribe(\n        (index: number) => { this.changeFocus(index); }\n      )\n    );\n  }\n\n  setFormBuilder() {\n    this.otpForm = this.formBuilder.group({});\n    this.limitArray = Array.from(Array(this.limit).keys());\n    this.limitArray.map((element) => {\n      this.otpForm.addControl(`otp-${element}`, new FormControl('', Validators.required));\n    });\n  }\n\n  changeFocus(id: number) {\n    const currentElement: HTMLInputElement = this.ngOtpService.getElement(id);\n    if (id && this.ngOtpService.isEmptySting(currentElement.value)) {\n      this.moveBackward(id);\n    } else if (this.ngOtpService.isLastInput(id, this.limit - 1)) {\n      currentElement.select();\n    } else if (!this.ngOtpService.isEmptySting(currentElement.value)) {\n      this.moveForward(id);\n    }\n    this.otpOut.emit(Object.values(this.otpForm.value).join(''));\n  }\n\n  moveForward(id: number) {\n    const nextElement: HTMLInputElement = this.ngOtpService.getElement(id + 1);\n    nextElement.focus();\n  }\n\n  moveBackward(id: number) {\n    const nextElement: HTMLInputElement = this.ngOtpService.getElement(id - 1);\n    nextElement.focus();\n  }\n\n  onFocus(id) {\n    const currentElement: HTMLInputElement = this.ngOtpService.getElement(id);\n    currentElement.select();\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { NgOtpComponent } from './ng-otp.component';\n\nimport {ReactiveFormsModule} from '@angular/forms';\nimport { BrowserModule } from '@angular/platform-browser';\n\n@NgModule({\n  declarations: [NgOtpComponent],\n  imports: [\n    BrowserModule,\n    ReactiveFormsModule\n  ],\n  exports: [NgOtpComponent]\n})\nexport class NgOtpModule { }\n"],"names":["Injectable","EventEmitter","Subject","Subscription","throttleTime","FormControl","Validators","Component","FormBuilder","Input","Output","NgModule","BrowserModule","ReactiveFormsModule"],"mappings":"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"}
